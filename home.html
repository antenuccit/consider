<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Consider home</title>

    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/home.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
  <div class="container">
  	<div class="row">
	  	<div id="count-container" class="alert alert-warning col-md-6"><p>Time left to complete: <span id="countdown"> </span></p></div>
	  	<a class="btn btn-warning sign-out-btn col-md-2 col-md-offset-4" href="{{url}}">
		 <span class="glyphicon glyphicon-log-out" aria-hidden="true"></span> Sign out
	    </a>
    </div>
  	<div class="header">
  		<h3 class="text-muted">Question 1</h3>
  	</div>
    <div class="jumbotron">
      	<p class"lead well"> What do you think about Axiomatic Semantics? </p>
    </div>
    <form id="form" method="post" action="/home">
	    <div class="list-group">
	    	<input type="radio" name="optionsRadios" id="option1" value="option1">
			<label class="radio list-group-item" for="option1">
				Option one is this and that&mdash;be sure to include why it's great
			</label>
			<input type="radio" name="optionsRadios" id="option2" value="option2">
			<label class="radio list-group-item" for="option2">
				Option one is this and that&mdash;be sure to include why it's great
			</label>
			<input type="radio" name="optionsRadios" id="option3" value="option3">
			<label class="radio list-group-item" for="option3">
				Option one is this and that&mdash;be sure to include why it's great
			</label>
			<input type="radio" name="optionsRadios" id="option4" value="option4">
			<label class="radio list-group-item" for="option4">
				Option one is this and that&mdash;be sure to include why it's great
			</label>
		</div>
		<textarea class="form-control" rows="3" id="comment" placeholder="Please enter why you support this option..." required>
		{%- if comment -%}{{comment}}
		{%- endif -%}
		</textarea>
		<button type="submit" class="btn btn-lg btn-success sub-btn"><span class="glyphicon glyphicon-send" aria-hidden="true"></span> Submit</button>
    </form>
   </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/countdown.min.js"></script>
    <script src="/js/bootbox.min.js"></script>
    {%- if option -%}
    		<script type="text/javascript">
    			$("#{{option}}").prop("checked",true);
	    	</script>
	  {%- endif -%}
    <script type="text/javascript">
	    var clock = document.getElementById("countdown");
	    targetDate = new Date(2015,03,01);
	    clock.innerHTML = countdown(targetDate).toString();
	    setInterval(function(){
	    		clock.innerHTML = countdown(targetDate).toString();
	  		}, 1000);

	    $("#form").submit(function (event){
	    	//Prevent the default behaviour
	        event.preventDefault();

	        //collect form elements
	        var $form = $(this);

	        if ($form.find("input:radio[name='optionsRadios']:checked").val() === undefined) {
	        	alert("Please select one of the options");
	        }
	        else {
	        	radio = $form.find("input:radio[name='optionsRadios']:checked").val(),
	        	comment = $form.find("textarea").val(),
	        	url = $form.attr("action");
	        	$.post(url,{option:radio, comm:comment},function (data) {
		        	bootbox.alert(data);
		        });
	        }
	    });
    </script>
  </body>
</html>