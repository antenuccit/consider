{% extends "admin_base.html" %}
{% block title %}Admin{% endblock %}

{% block content %}
<h1 class="page-header">Dashboard - {{section}}</h1>
<h4 class="form-signin-heading">Add students to the section below:</h4>
  <form class="form-horizontal" id="form" method="post" style="margin-top: 40px;text-align: center;" action="/addStudent">
    <div class="form-group">
      <label for="inputEmail" class="col-sm-2 control-label">Email</label>
      <div class="col-sm-10">
        <input type="email" class="form-control" id="inputEmail" placeholder="Email" name="email" required="true" autofocus>
      </div>
    </div>
    <div class="form-group">
      <div>
        <button type="submit" class="btn btn-default">Submit</button>
      </div>
    </div>
  </form>
{% endblock %}

{% block script %}
<script>
  $("#form").submit(function (event) {
        //Prevent the default behaviour
        event.preventDefault();

        //collect form elements
        var $form = $(this),
        email2 = $form.find("input[name='email']").val(),
        class2 = "{{section}}",
        url = $form.attr("action");

        // do the POST and get the callback
        $.post(url,{email:email2, class:class2},function (data) {
          bootbox.alert(data+" has been added as student for "+ class2);
        });
      });
</script>
{% endblock %}